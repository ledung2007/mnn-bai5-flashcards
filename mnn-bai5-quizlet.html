<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minna no Nihongo - B√†i 5 Flashcards</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            text-align: center;
            color: #333;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .progress-container {
            max-width: 800px;
            margin: 0.5rem auto;
            width: 100%;
            padding: 0 1rem;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: #555;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .controls {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 0.5rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 0.9rem;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #5568d3;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .main-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem 1rem;
            position: relative;
        }

        .card-container {
            width: 100%;
            max-width: 800px;
            height: 500px;
            perspective: 1000px;
            position: relative;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            padding: 2rem;
            overflow-y: auto;
        }

        .card-front {
            z-index: 2;
        }

        .card-back {
            transform: rotateY(180deg);
            background: #f8f9fa;
        }

        .topic-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            background: #667eea;
            color: white;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .card-image {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .jp-text {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            text-align: center;
            margin-bottom: 1rem;
        }

        .kana-text {
            font-size: 1.3rem;
            color: #666;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .romaji-text {
            font-size: 1.1rem;
            color: #888;
            text-align: center;
            margin-bottom: 1.5rem;
            font-style: italic;
        }

        .vi-text {
            font-size: 1.5rem;
            color: #764ba2;
            text-align: center;
            font-weight: 500;
            margin-bottom: 2rem;
        }

        .example-box {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            margin-top: auto;
        }

        .example-jp {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .example-vi {
            font-size: 1rem;
            color: #666;
        }

        .image-credit {
            font-size: 0.7rem;
            color: #999;
            margin-top: 0.5rem;
            text-align: center;
        }

        .image-credit a {
            color: #667eea;
            text-decoration: none;
        }

        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.3s;
            z-index: 10;
        }

        .nav-btn:hover {
            background: white;
            transform: translateY(-50%) scale(1.1);
        }

        .nav-btn.prev {
            left: 1rem;
        }

        .nav-btn.next {
            right: 1rem;
        }

        .keyboard-hints {
            text-align: center;
            color: white;
            font-size: 0.9rem;
            margin-top: 1rem;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .card-container {
                height: 450px;
            }

            .jp-text {
                font-size: 2rem;
            }

            .kana-text {
                font-size: 1.1rem;
            }

            .vi-text {
                font-size: 1.2rem;
            }

            .nav-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
        }

        .loading {
            text-align: center;
            color: white;
            font-size: 1.5rem;
        }

        .topline {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .chip {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            padding: 0.4rem 0.8rem;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            user-select: none;
        }

        .chip:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: scale(1.1);
        }

        .chip:active {
            transform: scale(0.95);
        }

        /* Import Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            color: #333;
            font-size: 1.5rem;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 2rem;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .close-btn:hover {
            background: #f0f0f0;
            color: #333;
        }

        .import-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab-btn {
            padding: 0.7rem 1.2rem;
            border: none;
            background: none;
            cursor: pointer;
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 0.95rem;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: 500;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .import-textarea {
            width: 100%;
            min-height: 300px;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-family: 'Noto Sans JP', monospace;
            font-size: 0.9rem;
            resize: vertical;
            margin-bottom: 1rem;
        }

        .import-textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .file-upload-area {
            border: 2px dashed #ccc;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 1rem;
        }

        .file-upload-area:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .file-upload-area.drag-over {
            border-color: #667eea;
            background: #f0f3ff;
        }

        .file-input {
            display: none;
        }

        .format-info {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-size: 0.85rem;
            color: #555;
        }

        .format-info pre {
            background: white;
            padding: 0.5rem;
            border-radius: 4px;
            overflow-x: auto;
            margin-top: 0.5rem;
        }

        .import-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
        }

        .status-message {
            padding: 0.8rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
        }

        .status-message.show {
            display: block;
        }

        .status-message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>„Åø„Çì„Å™„ÅÆÊó•Êú¨Ë™û - B√†i 5 Flashcards</h1>
        <div class="progress-container">
            <div class="progress-info">
                <span id="cardCounter">1 / 48</span>
                <span id="topicLabel">Ph∆∞∆°ng ti·ªán</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
        <div class="controls">
            <button class="btn" onclick="flipCard()">üîÑ L·∫≠t th·∫ª (Space)</button>
            <button class="btn" onclick="shuffleCards()">üîÄ X√°o tr·ªôn (S)</button>
            <button class="btn" onclick="openImportModal()">üì• N·∫°p t·ª´ Text (I)</button>
            <button class="btn" onclick="toggleFullscreen()">‚õ∂ To√†n m√†n h√¨nh (F)</button>
        </div>
    </div>

    <div class="main-content">
        <button class="nav-btn prev" onclick="prevCard()">‚Äπ</button>
        <div class="card-container">
            <div class="card" id="card" onclick="flipCard()">
                <div class="card-face card-front" id="cardFront">
                    <div class="loading">ƒêang t·∫£i...</div>
                </div>
                <div class="card-face card-back" id="cardBack">
                    <div class="loading">ƒêang t·∫£i...</div>
                </div>
            </div>
        </div>
        <button class="nav-btn next" onclick="nextCard()">‚Ä∫</button>
    </div>

    <div class="keyboard-hints">
        ‚Üê ‚Üí Chuy·ªÉn th·∫ª | Space/Enter L·∫≠t | L Nghe | Shift+L Nghe c√¢u | S X√°o tr·ªôn | I N·∫°p t·ª´ | F To√†n m√†n h√¨nh
    </div>

    <!-- Import Modal -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì• N·∫°p Flashcards t·ª´ Text</h2>
                <button class="close-btn" onclick="closeImportModal()">&times;</button>
            </div>

            <div id="statusMessage" class="status-message"></div>

            <div class="import-tabs">
                <button class="tab-btn active" onclick="switchTab('text')">Nh·∫≠p Text</button>
                <button class="tab-btn" onclick="switchTab('file')">Upload File</button>
                <button class="tab-btn" onclick="switchTab('help')">H∆∞·ªõng d·∫´n</button>
            </div>

            <!-- Text Input Tab -->
            <div id="textTab" class="tab-content active">
                <div class="format-info">
                    <strong>H·ªó tr·ª£ 3 ƒë·ªãnh d·∫°ng:</strong> Custom, TSV, JSON
                </div>
                <textarea id="importTextarea" class="import-textarea" placeholder="D√°n n·ªôi dung flashcards v√†o ƒë√¢y...

V√≠ d·ª• ƒë·ªãnh d·∫°ng Custom:
=== Card ===
Topic: Ph∆∞∆°ng ti·ªán
JP: È£õË°åÊ©ü
Kana: „Å≤„Åì„ÅÜ„Åç
Romaji: hik≈çki
VI: m√°y bay
Example JP: „Å≤„Åì„ÅÜ„Åç„ÅßÊù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ
Example VI: T√¥i ƒëi Tokyo b·∫±ng m√°y bay„ÄÇ
Image: https://...
Credit: https://...

=== Card ===
...
"></textarea>
                <div class="import-actions">
                    <button class="btn" onclick="closeImportModal()">H·ªßy</button>
                    <button class="btn" onclick="importFromText()">‚úì N·∫°p D·ªØ Li·ªáu</button>
                </div>
            </div>

            <!-- File Upload Tab -->
            <div id="fileTab" class="tab-content">
                <div class="format-info">
                    <strong>H·ªó tr·ª£ c√°c file:</strong> .txt, .tsv, .json
                </div>
                <div class="file-upload-area" id="fileUploadArea" onclick="document.getElementById('fileInput').click()">
                    <p>üìÅ K√©o th·∫£ file v√†o ƒë√¢y ho·∫∑c click ƒë·ªÉ ch·ªçn file</p>
                    <p style="font-size: 0.85rem; color: #999;">H·ªó tr·ª£: .txt, .tsv, .json</p>
                </div>
                <input type="file" id="fileInput" class="file-input" accept=".txt,.tsv,.json" onchange="handleFileSelect(event)">
                <div class="import-actions">
                    <button class="btn" onclick="closeImportModal()">H·ªßy</button>
                </div>
            </div>

            <!-- Help Tab -->
            <div id="helpTab" class="tab-content">
                <div class="format-info">
                    <h3>üìñ ƒê·ªãnh d·∫°ng Custom</h3>
                    <p>D·ªÖ ƒë·ªçc, d·ªÖ vi·∫øt b·∫±ng tay:</p>
                    <pre>=== Card ===
Topic: Ph∆∞∆°ng ti·ªán
JP: È£õË°åÊ©ü
Kana: „Å≤„Åì„ÅÜ„Åç
Romaji: hik≈çki
VI: m√°y bay
Example JP: „Å≤„Åì„ÅÜ„Åç„ÅßÊù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ
Example VI: T√¥i ƒëi Tokyo b·∫±ng m√°y bay„ÄÇ
Image: https://...
Credit: https://...</pre>

                    <h3>üìä ƒê·ªãnh d·∫°ng TSV (Tab-separated)</h3>
                    <p>T∆∞∆°ng th√≠ch v·ªõi Excel, Google Sheets:</p>
                    <pre>topic	jp	kana	romaji	vi	exJp	exVi	img	credit
Ph∆∞∆°ng ti·ªán	È£õË°åÊ©ü	„Å≤„Åì„ÅÜ„Åç	hik≈çki	m√°y bay	„Å≤„Åì„ÅÜ„Åç„ÅßÊù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ	T√¥i ƒëi Tokyo b·∫±ng m√°y bay„ÄÇ	https://...	https://...</pre>

                    <h3>üíª ƒê·ªãnh d·∫°ng JSON</h3>
                    <p>Cho l·∫≠p tr√¨nh vi√™n:</p>
                    <pre>[
  {
    "topic": "Ph∆∞∆°ng ti·ªán",
    "jp": "È£õË°åÊ©ü",
    "kana": "„Å≤„Åì„ÅÜ„Åç",
    "romaji": "hik≈çki",
    "vi": "m√°y bay",
    "exJp": "„Å≤„Åì„ÅÜ„Åç„ÅßÊù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
    "exVi": "T√¥i ƒëi Tokyo b·∫±ng m√°y bay„ÄÇ",
    "img": "https://...",
    "credit": "https://..."
  }
]</pre>
                </div>
            </div>
        </div>
    </div>

    <script>
        const cards = [
            // PH∆Ø∆†NG TI·ªÜN (8 th·∫ª)
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "È£õË°åÊ©ü",
                kana: "„Å≤„Åì„ÅÜ„Åç",
                romaji: "hik≈çki",
                vi: "m√°y bay",
                exJp: "„Å≤„Åì„ÅÜ„Åç„ÅßÊù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Tokyo b·∫±ng m√°y bay„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Airplane_taking_off.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Airplane_taking_off.jpg"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "Ëàπ",
                kana: "„Åµ„Å≠",
                romaji: "fune",
                vi: "t√†u th·ªßy, thuy·ªÅn",
                exJp: "„Åµ„Å≠„ÅßÂ§ßÈò™„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Osaka b·∫±ng t√†u„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Containership.JPG",
                credit: "https://commons.wikimedia.org/wiki/File:Containership.JPG"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "ÈõªËªä",
                kana: "„Åß„Çì„Åó„ÇÉ",
                romaji: "densha",
                vi: "t√†u ƒëi·ªán",
                exJp: "„Åß„Çì„Åó„ÇÉ„Åß‰ºöÁ§æ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi l√†m b·∫±ng t√†u ƒëi·ªán„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/JR_COMMUTER_TRAIN_KYOTO_STATION_JAPAN_JUNE_2012_(7408283698).jpg",
                credit: "https://commons.wikimedia.org/wiki/File:JR_COMMUTER_TRAIN_KYOTO_STATION_JAPAN_JUNE_2012_(7408283698).jpg"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "Âú∞‰∏ãÈâÑ",
                kana: "„Å°„Åã„Å¶„Å§",
                romaji: "chikatetsu",
                vi: "t√†u ƒëi·ªán ng·∫ßm",
                exJp: "„Å°„Åã„Å¶„Å§„ÅßÊñ∞ÂÆø„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Shinjuku b·∫±ng t√†u ƒëi·ªán ng·∫ßm„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Union_Station_subway_platform.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Union_Station_subway_platform.jpg"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "Êñ∞ÂππÁ∑ö",
                kana: "„Åó„Çì„Åã„Çì„Åõ„Çì",
                romaji: "shinkansen",
                vi: "t√†u si√™u t·ªëc",
                exJp: "„Åó„Çì„Åã„Çì„Åõ„Çì„Åß‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Kyoto b·∫±ng Shinkansen„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/JRC_N700_series_Z28.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:JRC_N700_series_Z28.jpg"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "„Éê„Çπ",
                kana: "„Éê„Çπ",
                romaji: "basu",
                vi: "xe bu√Ωt",
                exJp: "„Éê„Çπ„ÅßÂ≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒë·∫øn tr∆∞·ªùng b·∫±ng xe bu√Ωt„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Tokyo_Bus_Fuso_Aero_Ace.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Tokyo_Bus_Fuso_Aero_Ace.jpg"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "„Çø„ÇØ„Ç∑„Éº",
                kana: "„Çø„ÇØ„Ç∑„Éº",
                romaji: "takushƒ´",
                vi: "taxi",
                exJp: "„Çø„ÇØ„Ç∑„Éº„Åß„ÅÜ„Å°„Å∏Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ nh√† b·∫±ng taxi„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Crowntaxi.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Crowntaxi.jpg"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "Ëá™Ëª¢Ëªä",
                kana: "„Åò„Å¶„Çì„Åó„ÇÉ",
                romaji: "jitensha",
                vi: "xe ƒë·∫°p",
                exJp: "„Åò„Å¶„Çì„Åó„ÇÉ„ÅßÈßÖ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi ƒë·∫øn ga b·∫±ng xe ƒë·∫°p„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/City_bike_1.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:City_bike_1.jpg"
            },

            // ƒê·ªäA ƒêI·ªÇM & ƒê·ªòNG T·ª™ (12 th·∫ª)
            {
                topic: "ƒê·ªãa ƒëi·ªÉm",
                jp: "Â≠¶Ê†°",
                kana: "„Åå„Å£„Åì„ÅÜ",
                romaji: "gakk≈ç",
                vi: "tr∆∞·ªùng h·ªçc",
                exJp: "„Éê„Çπ„ÅßÂ≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi ƒë·∫øn tr∆∞·ªùng b·∫±ng xe bu√Ωt„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/School_building.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:School_building.jpg"
            },
            {
                topic: "ƒê·ªãa ƒëi·ªÉm",
                jp: "‰ºöÁ§æ",
                kana: "„Åã„ÅÑ„Åó„ÇÉ",
                romaji: "kaisha",
                vi: "c√¥ng ty",
                exJp: "„Åß„Çì„Åó„ÇÉ„Åß‰ºöÁ§æ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi c√¥ng ty b·∫±ng t√†u ƒëi·ªán„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Office-building.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Office-building.jpg"
            },
            {
                topic: "ƒê·ªãa ƒëi·ªÉm",
                jp: "ÈßÖ",
                kana: "„Åà„Åç",
                romaji: "eki",
                vi: "ga, nh√† ga",
                exJp: "„Åò„Å¶„Çì„Åó„ÇÉ„ÅßÈßÖ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi ƒë·∫øn ga b·∫±ng xe ƒë·∫°p„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Tokyo_Station_Marunouchi_Building.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Tokyo_Station_Marunouchi_Building.jpg"
            },
            {
                topic: "ƒê·ªãa ƒëi·ªÉm",
                jp: "„ÅÜ„Å°",
                kana: "„ÅÜ„Å°",
                romaji: "uchi",
                vi: "nh√†, gia ƒë√¨nh",
                exJp: "„Çø„ÇØ„Ç∑„Éº„Åß„ÅÜ„Å°„Å∏Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ nh√† b·∫±ng taxi„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Japanese_House.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Japanese_House.jpg"
            },
            {
                topic: "ƒê·ªãa ƒëi·ªÉm",
                jp: "„Çπ„Éº„Éë„Éº",
                kana: "„Çπ„Éº„Éë„Éº",
                romaji: "s≈´pƒÅ",
                vi: "si√™u th·ªã",
                exJp: "„ÅÇ„Çã„ÅÑ„Å¶„Çπ„Éº„Éë„Éº„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi b·ªô ƒë·∫øn si√™u th·ªã„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Supermarket.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Supermarket.jpg"
            },
            {
                topic: "Ng∆∞·ªùi",
                jp: "Âèã„Å†„Å°",
                kana: "„Å®„ÇÇ„Å†„Å°",
                romaji: "tomodachi",
                vi: "b·∫°n b√®",
                exJp: "Âèã„Å†„Å°„Å®Â§ßÈò™„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Osaka v·ªõi b·∫°n„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Group_of_friends.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Group_of_friends.jpg"
            },
            {
                topic: "Ng∆∞·ªùi",
                jp: "ÂÆ∂Êóè",
                kana: "„Åã„Åû„Åè",
                romaji: "kazoku",
                vi: "gia ƒë√¨nh",
                exJp: "ÂÆ∂Êóè„Å®‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Kyoto v·ªõi gia ƒë√¨nh„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Family_portrait.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Family_portrait.jpg"
            },
            {
                topic: "Ng∆∞·ªùi",
                jp: "„Å≤„Å®„Çä„Åß",
                kana: "„Å≤„Å®„Çä„Åß",
                romaji: "hitori de",
                vi: "m·ªôt m√¨nh",
                exJp: "„Å≤„Å®„Çä„ÅßÊù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Tokyo m·ªôt m√¨nh„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Alone.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Alone.jpg"
            },
            {
                topic: "ƒê·ªông t·ª´",
                jp: "Ë°å„Åç„Åæ„Åô",
                kana: "„ÅÑ„Åç„Åæ„Åô",
                romaji: "ikimasu",
                vi: "ƒëi",
                exJp: "„Éê„Çπ„ÅßÂ≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi ƒë·∫øn tr∆∞·ªùng b·∫±ng xe bu√Ωt„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Walking_forward.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Walking_forward.jpg"
            },
            {
                topic: "ƒê·ªông t·ª´",
                jp: "Êù•„Åæ„Åô",
                kana: "„Åç„Åæ„Åô",
                romaji: "kimasu",
                vi: "ƒë·∫øn",
                exJp: "Âèã„Å†„Å°„Åå„ÅÜ„Å°„Å∏Êù•„Åæ„Åô„ÄÇ",
                exVi: "B·∫°n t√¥i ƒë·∫øn nh√†„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Coming.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Coming.jpg"
            },
            {
                topic: "ƒê·ªông t·ª´",
                jp: "Â∏∞„Çä„Åæ„Åô",
                kana: "„Åã„Åà„Çä„Åæ„Åô",
                romaji: "kaerimasu",
                vi: "v·ªÅ",
                exJp: "„Çø„ÇØ„Ç∑„Éº„Åß„ÅÜ„Å°„Å∏Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ nh√† b·∫±ng taxi„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Going_home.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Going_home.jpg"
            },

            // TH·ªúI GIAN - TU·∫¶N/TH√ÅNG/NƒÇM (10 th·∫ª)
            {
                topic: "Th·ªùi gian",
                jp: "ÂÖàÈÄ±",
                kana: "„Åõ„Çì„Åó„ÇÖ„ÅÜ",
                romaji: "sensh≈´",
                vi: "tu·∫ßn tr∆∞·ªõc",
                exJp: "ÂÖàÈÄ±‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åó„Åü„ÄÇ",
                exVi: "Tu·∫ßn tr∆∞·ªõc t√¥i ƒë√£ ƒëi Kyoto„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar_week.png",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar_week.png"
            },
            {
                topic: "Th·ªùi gian",
                jp: "‰ªäÈÄ±",
                kana: "„Åì„Çì„Åó„ÇÖ„ÅÜ",
                romaji: "konsh≈´",
                vi: "tu·∫ßn n√†y",
                exJp: "‰ªäÈÄ±Â§ßÈò™„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "Tu·∫ßn n√†y t√¥i s·∫Ω ƒëi Osaka„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar_week.png",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar_week.png"
            },
            {
                topic: "Th·ªùi gian",
                jp: "Êù•ÈÄ±",
                kana: "„Çâ„ÅÑ„Åó„ÇÖ„ÅÜ",
                romaji: "raish≈´",
                vi: "tu·∫ßn sau",
                exJp: "Êù•ÈÄ±Êù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "Tu·∫ßn sau t√¥i s·∫Ω ƒëi Tokyo„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar_week.png",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar_week.png"
            },
            {
                topic: "Th·ªùi gian",
                jp: "ÂÖàÊúà",
                kana: "„Åõ„Çì„Åí„Å§",
                romaji: "sengetsu",
                vi: "th√°ng tr∆∞·ªõc",
                exJp: "ÂÖàÊúàÊó•Êú¨„Å∏Ë°å„Åç„Åæ„Åó„Åü„ÄÇ",
                exVi: "Th√°ng tr∆∞·ªõc t√¥i ƒë√£ ƒëi Nh·∫≠t„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th·ªùi gian",
                jp: "‰ªäÊúà",
                kana: "„Åì„Çì„Åí„Å§",
                romaji: "kongetsu",
                vi: "th√°ng n√†y",
                exJp: "‰ªäÊúà„Éô„Éà„Éä„É†„Å∏Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "Th√°ng n√†y t√¥i v·ªÅ Vi·ªát Nam„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th·ªùi gian",
                jp: "Êù•Êúà",
                kana: "„Çâ„ÅÑ„Åí„Å§",
                romaji: "raigetsu",
                vi: "th√°ng sau",
                exJp: "Êù•ÊúàÈüìÂõΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "Th√°ng sau t√¥i s·∫Ω ƒëi H√†n Qu·ªëc„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th·ªùi gian",
                jp: "ÂéªÂπ¥",
                kana: "„Åç„Çá„Å≠„Çì",
                romaji: "kyonen",
                vi: "nƒÉm ngo√°i",
                exJp: "ÂéªÂπ¥‰∏≠ÂõΩ„Å∏Ë°å„Åç„Åæ„Åó„Åü„ÄÇ",
                exVi: "NƒÉm ngo√°i t√¥i ƒë√£ ƒëi Trung Qu·ªëc„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th·ªùi gian",
                jp: "‰ªäÂπ¥",
                kana: "„Åì„Å®„Åó",
                romaji: "kotoshi",
                vi: "nƒÉm nay",
                exJp: "‰ªäÂπ¥Êó•Êú¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "NƒÉm nay t√¥i s·∫Ω ƒëi Nh·∫≠t„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th·ªùi gian",
                jp: "Êù•Âπ¥",
                kana: "„Çâ„ÅÑ„Å≠„Çì",
                romaji: "rainen",
                vi: "nƒÉm sau",
                exJp: "Êù•Âπ¥„Ç¢„É°„É™„Ç´„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "NƒÉm sau t√¥i s·∫Ω ƒëi M·ªπ„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th·ªùi gian",
                jp: "„ÅÑ„Å§",
                kana: "„ÅÑ„Å§",
                romaji: "itsu",
                vi: "khi n√†o",
                exJp: "„ÅÑ„Å§Êó•Êú¨„Å∏Ë°å„Åç„Åæ„Åô„Åã„ÄÇ",
                exVi: "Khi n√†o b·∫°n ƒëi Nh·∫≠t?",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Question_mark.svg",
                credit: "https://commons.wikimedia.org/wiki/File:Question_mark.svg"
            },

            // NG√ÄY TRONG TH√ÅNG (20 th·∫ª - c√°c ng√†y ƒë·∫∑c bi·ªát + m·∫´u)
            {
                topic: "Ng√†y th√°ng",
                jp: "„Å§„ÅÑ„Åü„Å°",
                kana: "„Å§„ÅÑ„Åü„Å°",
                romaji: "tsuitachi",
                vi: "ng√†y 1",
                exJp: "ÔºëÊúà„Å§„ÅÑ„Åü„Å°„Å´Êù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Tokyo v√†o ng√†y 1 th√°ng 1„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Åµ„Å§„Åã",
                kana: "„Åµ„Å§„Åã",
                romaji: "futsuka",
                vi: "ng√†y 2",
                exJp: "ÔºíÊúà„Åµ„Å§„Åã„Å´Â§ßÈò™„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Osaka v√†o ng√†y 2 th√°ng 2„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Åø„Å£„Åã",
                kana: "„Åø„Å£„Åã",
                romaji: "mikka",
                vi: "ng√†y 3",
                exJp: "ÔºìÊúà„Åø„Å£„Åã„Å´‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Kyoto v√†o ng√†y 3 th√°ng 3„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Çà„Å£„Åã",
                kana: "„Çà„Å£„Åã",
                romaji: "yokka",
                vi: "ng√†y 4",
                exJp: "ÔºîÊúà„Çà„Å£„Åã„Å´‰ºöÁ§æ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi c√¥ng ty v√†o ng√†y 4 th√°ng 4„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„ÅÑ„Å§„Åã",
                kana: "„ÅÑ„Å§„Åã",
                romaji: "itsuka",
                vi: "ng√†y 5",
                exJp: "ÔºïÊúà„ÅÑ„Å§„Åã„Å´Â≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒë·∫øn tr∆∞·ªùng v√†o ng√†y 5 th√°ng 5„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„ÇÄ„ÅÑ„Åã",
                kana: "„ÇÄ„ÅÑ„Åã",
                romaji: "muika",
                vi: "ng√†y 6",
                exJp: "ÔºñÊúà„ÇÄ„ÅÑ„Åã„Å´Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ nh√† v√†o ng√†y 6 th√°ng 6„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Å™„ÅÆ„Åã",
                kana: "„Å™„ÅÆ„Åã",
                romaji: "nanoka",
                vi: "ng√†y 7",
                exJp: "ÔºóÊúà„Å™„ÅÆ„Åã„Å´Êù•„Åæ„Åô„ÄÇ",
                exVi: "T√¥i s·∫Ω ƒë·∫øn v√†o ng√†y 7 th√°ng 7„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Çà„ÅÜ„Åã",
                kana: "„Çà„ÅÜ„Åã",
                romaji: "y≈çka",
                vi: "ng√†y 8",
                exJp: "ÔºòÊúà„Çà„ÅÜ„Åã„Å´Êù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Tokyo v√†o ng√†y 8 th√°ng 8„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Åì„Åì„ÅÆ„Åã",
                kana: "„Åì„Åì„ÅÆ„Åã",
                romaji: "kokonoka",
                vi: "ng√†y 9",
                exJp: "ÔºôÊúà„Åì„Åì„ÅÆ„Åã„Å´Â§ßÈò™„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Osaka v√†o ng√†y 9 th√°ng 9„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Å®„Åä„Åã",
                kana: "„Å®„Åä„Åã",
                romaji: "t≈çka",
                vi: "ng√†y 10",
                exJp: "ÔºëÔºêÊúà„Å®„Åä„Åã„Å´Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ v√†o ng√†y 10 th√°ng 10„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Åò„ÇÖ„ÅÜ„Çà„Å£„Åã",
                kana: "„Åò„ÇÖ„ÅÜ„Çà„Å£„Åã",
                romaji: "j≈´yokka",
                vi: "ng√†y 14",
                exJp: "ÔºíÊúà„Åò„ÇÖ„ÅÜ„Çà„Å£„Åã„Å´‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Kyoto v√†o ng√†y 14 th√°ng 2„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„ÅØ„Å§„Åã",
                kana: "„ÅØ„Å§„Åã",
                romaji: "hatsuka",
                vi: "ng√†y 20",
                exJp: "ÔºìÊúà„ÅØ„Å§„Åã„Å´Êù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Tokyo v√†o ng√†y 20 th√°ng 3„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Å´„Åò„ÇÖ„ÅÜ„Çà„Å£„Åã",
                kana: "„Å´„Åò„ÇÖ„ÅÜ„Çà„Å£„Åã",
                romaji: "nij≈´yokka",
                vi: "ng√†y 24",
                exJp: "ÔºëÔºíÊúà„Å´„Åò„ÇÖ„ÅÜ„Çà„Å£„Åã„Å´Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ v√†o ng√†y 24 th√°ng 12„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Äú„Å´„Å°",
                kana: "„Äú„Å´„Å°",
                romaji: "~nichi",
                vi: "ng√†y ~ (11,12,13,15-19,21-23,25-31)",
                exJp: "ÔºëÔºï„Å´„Å°Ôºà„Åò„ÇÖ„ÅÜ„Åî„Å´„Å°Ôºâ„Å´‰ºöÁ§æ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi c√¥ng ty v√†o ng√†y 15„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },

            // TH√ÅNG (12 th·∫ª)
            {
                topic: "Th√°ng",
                jp: "ÔºëÊúà",
                kana: "„ÅÑ„Å°„Åå„Å§",
                romaji: "ichigatsu",
                vi: "th√°ng 1",
                exJp: "ÔºëÊúà„Å´Êó•Êú¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Nh·∫≠t v√†o th√°ng 1„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºíÊúà",
                kana: "„Å´„Åå„Å§",
                romaji: "nigatsu",
                vi: "th√°ng 2",
                exJp: "ÔºíÊúà„Å´‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Kyoto v√†o th√°ng 2„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºìÊúà",
                kana: "„Åï„Çì„Åå„Å§",
                romaji: "sangatsu",
                vi: "th√°ng 3",
                exJp: "ÔºìÊúà„Å´Â§ßÈò™„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Osaka v√†o th√°ng 3„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºîÊúà",
                kana: "„Åó„Åå„Å§",
                romaji: "shigatsu",
                vi: "th√°ng 4",
                exJp: "ÔºîÊúà„Å´Â≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒë·∫øn tr∆∞·ªùng v√†o th√°ng 4„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºïÊúà",
                kana: "„Åî„Åå„Å§",
                romaji: "gogatsu",
                vi: "th√°ng 5",
                exJp: "ÔºïÊúà„Å´Êù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Tokyo v√†o th√°ng 5„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºñÊúà",
                kana: "„Çç„Åè„Åå„Å§",
                romaji: "rokugatsu",
                vi: "th√°ng 6",
                exJp: "ÔºñÊúà„Å´Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ v√†o th√°ng 6„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºóÊúà",
                kana: "„Åó„Å°„Åå„Å§",
                romaji: "shichigatsu",
                vi: "th√°ng 7",
                exJp: "ÔºóÊúà„Å´‰ºöÁ§æ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi c√¥ng ty v√†o th√°ng 7„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºòÊúà",
                kana: "„ÅØ„Å°„Åå„Å§",
                romaji: "hachigatsu",
                vi: "th√°ng 8",
                exJp: "ÔºòÊúà„Å´„Éô„Éà„Éä„É†„Å∏Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ Vi·ªát Nam v√†o th√°ng 8„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºôÊúà",
                kana: "„Åè„Åå„Å§",
                romaji: "kugatsu",
                vi: "th√°ng 9",
                exJp: "ÔºôÊúà„Å´Â≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒë·∫øn tr∆∞·ªùng v√†o th√°ng 9„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºëÔºêÊúà",
                kana: "„Åò„ÇÖ„ÅÜ„Åå„Å§",
                romaji: "j≈´gatsu",
                vi: "th√°ng 10",
                exJp: "ÔºëÔºêÊúà„Å´Êó•Êú¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Nh·∫≠t v√†o th√°ng 10„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºëÔºëÊúà",
                kana: "„Åò„ÇÖ„ÅÜ„ÅÑ„Å°„Åå„Å§",
                romaji: "j≈´ichigatsu",
                vi: "th√°ng 11",
                exJp: "ÔºëÔºëÊúà„Å´‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Kyoto v√†o th√°ng 11„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºëÔºíÊúà",
                kana: "„Åò„ÇÖ„ÅÜ„Å´„Åå„Å§",
                romaji: "j≈´nigatsu",
                vi: "th√°ng 12",
                exJp: "ÔºëÔºíÊúà„Å´Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ v√†o th√°ng 12„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
        ];

        let currentIndex = 0;
        let isFlipped = false;
        const cardElement = document.getElementById('card');
        const cardFront = document.getElementById('cardFront');
        const cardBack = document.getElementById('cardBack');
        const progressFill = document.getElementById('progressFill');
        const cardCounter = document.getElementById('cardCounter');
        const topicLabel = document.getElementById('topicLabel');

        // Web Speech API - Japanese voices
        let jaVoices = [];
        function loadVoices(){
            jaVoices = window.speechSynthesis.getVoices()
                .filter(v => v.lang && v.lang.toLowerCase().startsWith('ja'));
        }
        if ('speechSynthesis' in window) {
            loadVoices();
            window.speechSynthesis.onvoiceschanged = loadVoices;
        }

        function speakJa(text, {rate=1, pitch=1, volume=1} = {}){
            if (!('speechSynthesis' in window)) return false;
            if (!text || !text.trim()) return false;
            // H·ªßy ph√°t hi·ªán t·∫°i ƒë·ªÉ tr√°nh ch·ªìng √¢m
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(text);
            // Ch·ªçn gi·ªçng ja-JP
            const exact = jaVoices.find(v => v.lang.toLowerCase() === 'ja-jp');
            const anyJa = jaVoices[0];
            u.voice = exact || anyJa || null;
            u.lang  = (exact || anyJa)?.lang || 'ja-JP';
            u.rate  = rate;
            u.pitch = pitch;
            u.volume= volume;
            window.speechSynthesis.speak(u);
            return true;
        }

        function stopSpeak(){ 
            try{ window.speechSynthesis.cancel(); }catch(_){} 
        }

        // H√†m ph√°t √¢m cho m·∫∑t tr∆∞·ªõc
        function speakFront(){
            const card = cards[currentIndex];
            const text = card.kana || card.jp;
            speakJa(text);
        }

        // H√†m ph√°t √¢m t·ª´ ·ªü m·∫∑t sau
        function speakBackWord(){
            const card = cards[currentIndex];
            const text = card.kana || card.jp;
            speakJa(text);
        }

        // H√†m ph√°t √¢m c√¢u v√≠ d·ª• ·ªü m·∫∑t sau
        function speakBackExample(){
            const card = cards[currentIndex];
            const text = card.exJp;
            speakJa(text);
        }

        // Preload images
        function preloadImages() {
            cards.forEach(card => {
                if (card.img) {
                    const img = new Image();
                    img.src = card.img;
                }
            });
        }

        function renderCard() {
            const card = cards[currentIndex];
            
            // Front side
            cardFront.innerHTML = `
                <div class="topline">
                    <span class="topic-badge">${card.topic}</span>
                    <button class="chip" id="speakFrontBtn" title="Nghe ph√°t √¢m (L)" aria-label="Ph√°t √¢m t·ª´" onclick="event.stopPropagation(); speakFront();">üîä</button>
                </div>
                ${card.img ? `
                    <img src="${card.img}" alt="${card.vi}" class="card-image">
                    <div class="image-credit">·∫¢nh: <a href="${card.credit}" target="_blank" rel="noopener">Wikimedia Commons</a></div>
                ` : ''}
                <div class="jp-text">${card.jp}</div>
                <div class="kana-text">${card.kana}</div>
                <div class="romaji-text">${card.romaji}</div>
            `;

            // Back side
            cardBack.innerHTML = `
                <div class="topline">
                    <span class="topic-badge">${card.topic}</span>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="chip" id="speakBackWordBtn" title="Nghe t·ª´ (L)" aria-label="Ph√°t √¢m t·ª´" onclick="event.stopPropagation(); speakBackWord();">üîä</button>
                        <button class="chip" id="speakBackExBtn" title="Nghe c√¢u v√≠ d·ª• (Shift+L)" aria-label="Ph√°t √¢m c√¢u v√≠ d·ª•" onclick="event.stopPropagation(); speakBackExample();">üîäüìù</button>
                    </div>
                </div>
                ${card.img ? `
                    <img src="${card.img}" alt="${card.vi}" class="card-image">
                ` : ''}
                <div class="vi-text">${card.vi}</div>
                <div class="example-box">
                    <div class="example-jp">${card.exJp}</div>
                    <div class="example-vi">${card.exVi}</div>
                </div>
            `;

            // Update progress
            progressFill.style.width = `${((currentIndex + 1) / cards.length) * 100}%`;
            cardCounter.textContent = `${currentIndex + 1} / ${cards.length}`;
            topicLabel.textContent = card.topic;

            // Reset flip state
            isFlipped = false;
            cardElement.classList.remove('flipped');
        }

        function flipCard() {
            isFlipped = !isFlipped;
            if (isFlipped) {
                cardElement.classList.add('flipped');
            } else {
                cardElement.classList.remove('flipped');
            }
        }

        function nextCard() {
            currentIndex = (currentIndex + 1) % cards.length;
            renderCard();
        }

        function prevCard() {
            currentIndex = (currentIndex - 1 + cards.length) % cards.length;
            renderCard();
        }

        function shuffleCards() {
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cards[i], cards[j]] = [cards[j], cards[i]];
            }
            currentIndex = 0;
            renderCard();
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log('Fullscreen error:', err);
                });
            } else {
                document.exitFullscreen();
            }
        }

        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            // Don't trigger shortcuts when modal is open or typing in textarea
            if (document.getElementById('importModal').classList.contains('show') &&
                e.target.tagName !== 'TEXTAREA') {
                if (e.key === 'Escape') {
                    closeImportModal();
                }
                return;
            }

            switch(e.key) {
                case 'ArrowLeft':
                    prevCard();
                    break;
                case 'ArrowRight':
                    nextCard();
                    break;
                case ' ':
                case 'Enter':
                    e.preventDefault();
                    flipCard();
                    break;
                case 's':
                case 'S':
                    shuffleCards();
                    break;
                case 'i':
                case 'I':
                    openImportModal();
                    break;
                case 'f':
                case 'F':
                    toggleFullscreen();
                    break;
                case 'Escape':
                    closeImportModal();
                    break;
                case 'l':
                case 'L':
                    e.preventDefault();
                    if (e.shiftKey) {
                        // Shift+L: ph√°t √¢m c√¢u v√≠ d·ª• (ch·ªâ khi ƒëang ·ªü m·∫∑t sau)
                        if (isFlipped) {
                            speakBackExample();
                        }
                    } else {
                        // L: ph√°t √¢m t·ª´ (m·∫∑t tr∆∞·ªõc ho·∫∑c m·∫∑t sau)
                        if (isFlipped) {
                            speakBackWord();
                        } else {
                            speakFront();
                        }
                    }
                    break;
            }
        });

        // ==================== IMPORT SYSTEM ====================

        // Modal control
        function openImportModal() {
            document.getElementById('importModal').classList.add('show');
        }

        function closeImportModal() {
            document.getElementById('importModal').classList.remove('show');
            clearStatusMessage();
        }

        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.add('active');
            event.target.classList.add('active');
        }

        // Status message
        function showStatusMessage(message, type = 'success') {
            const statusEl = document.getElementById('statusMessage');
            statusEl.textContent = message;
            statusEl.className = `status-message show ${type}`;
        }

        function clearStatusMessage() {
            const statusEl = document.getElementById('statusMessage');
            statusEl.className = 'status-message';
        }

        // ==================== PARSERS ====================

        // Parse Custom Format
        function parseCustomFormat(text) {
            const parsedCards = [];
            const cardBlocks = text.split(/===\s*Card\s*===/i).filter(b => b.trim());

            for (const block of cardBlocks) {
                const card = {};
                const lines = block.split('\n');

                for (const line of lines) {
                    const trimmed = line.trim();
                    if (!trimmed) continue;

                    // Match "Key: Value" pattern
                    const match = trimmed.match(/^(Topic|JP|Kana|Romaji|VI|Example\s*JP|Example\s*VI|Image|Credit)\s*:\s*(.+)$/i);
                    if (match) {
                        const key = match[1].toLowerCase().replace(/\s+/g, '');
                        const value = match[2].trim();

                        // Map keys to card properties
                        switch(key) {
                            case 'topic': card.topic = value; break;
                            case 'jp': card.jp = value; break;
                            case 'kana': card.kana = value; break;
                            case 'romaji': card.romaji = value; break;
                            case 'vi': card.vi = value; break;
                            case 'examplejp': card.exJp = value; break;
                            case 'examplevi': card.exVi = value; break;
                            case 'image': card.img = value; break;
                            case 'credit': card.credit = value; break;
                        }
                    }
                }

                // Validate required fields
                if (card.jp && card.vi) {
                    // Set defaults for missing fields
                    card.topic = card.topic || 'Kh√°c';
                    card.kana = card.kana || card.jp;
                    card.romaji = card.romaji || '';
                    card.exJp = card.exJp || '';
                    card.exVi = card.exVi || '';
                    card.img = card.img || '';
                    card.credit = card.credit || '';
                    parsedCards.push(card);
                }
            }

            return parsedCards;
        }

        // Parse TSV Format
        function parseTSV(text) {
            const lines = text.split('\n').filter(l => l.trim());
            if (lines.length < 2) return [];

            const headers = lines[0].split('\t').map(h => h.trim().toLowerCase());
            const parsedCards = [];

            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split('\t');
                const card = {};

                headers.forEach((header, index) => {
                    const value = (values[index] || '').trim();

                    // Map headers to card properties
                    switch(header) {
                        case 'topic': card.topic = value; break;
                        case 'jp': card.jp = value; break;
                        case 'kana': card.kana = value; break;
                        case 'romaji': card.romaji = value; break;
                        case 'vi': card.vi = value; break;
                        case 'exjp': case 'examplejp': card.exJp = value; break;
                        case 'exvi': case 'examplevi': card.exVi = value; break;
                        case 'img': case 'image': card.img = value; break;
                        case 'credit': card.credit = value; break;
                    }
                });

                // Validate required fields
                if (card.jp && card.vi) {
                    // Set defaults
                    card.topic = card.topic || 'Kh√°c';
                    card.kana = card.kana || card.jp;
                    card.romaji = card.romaji || '';
                    card.exJp = card.exJp || '';
                    card.exVi = card.exVi || '';
                    card.img = card.img || '';
                    card.credit = card.credit || '';
                    parsedCards.push(card);
                }
            }

            return parsedCards;
        }

        // Parse JSON Format
        function parseJSON(text) {
            try {
                const data = JSON.parse(text);
                const parsedCards = [];

                const cardsArray = Array.isArray(data) ? data : [data];

                for (const item of cardsArray) {
                    if (item.jp && item.vi) {
                        const card = {
                            topic: item.topic || 'Kh√°c',
                            jp: item.jp,
                            kana: item.kana || item.jp,
                            romaji: item.romaji || '',
                            vi: item.vi,
                            exJp: item.exJp || '',
                            exVi: item.exVi || '',
                            img: item.img || '',
                            credit: item.credit || ''
                        };
                        parsedCards.push(card);
                    }
                }

                return parsedCards;
            } catch (e) {
                return null;
            }
        }

        // Smart parser - detects format automatically
        function parseFlashcards(text) {
            if (!text || !text.trim()) {
                throw new Error('N·ªôi dung tr·ªëng');
            }

            // Try JSON first
            if (text.trim().startsWith('[') || text.trim().startsWith('{')) {
                const jsonCards = parseJSON(text);
                if (jsonCards && jsonCards.length > 0) {
                    return { cards: jsonCards, format: 'JSON' };
                }
            }

            // Try TSV (check if first line has tabs)
            if (text.includes('\t')) {
                const tsvCards = parseTSV(text);
                if (tsvCards.length > 0) {
                    return { cards: tsvCards, format: 'TSV' };
                }
            }

            // Try Custom format
            if (text.includes('=== Card ===') || text.match(/^(Topic|JP|Kana|Romaji|VI):/im)) {
                const customCards = parseCustomFormat(text);
                if (customCards.length > 0) {
                    return { cards: customCards, format: 'Custom' };
                }
            }

            throw new Error('Kh√¥ng nh·∫≠n di·ªán ƒë∆∞·ª£c ƒë·ªãnh d·∫°ng. Vui l√≤ng ki·ªÉm tra l·∫°i.');
        }

        // ==================== IMPORT FUNCTIONS ====================

        function importFromText() {
            const textarea = document.getElementById('importTextarea');
            const text = textarea.value;

            try {
                const result = parseFlashcards(text);

                // Replace cards array
                cards.length = 0;
                cards.push(...result.cards);

                // Reset state
                currentIndex = 0;
                preloadImages();
                renderCard();

                // Show success message
                showStatusMessage(
                    `‚úì ƒê√£ n·∫°p th√†nh c√¥ng ${result.cards.length} th·∫ª (ƒë·ªãnh d·∫°ng ${result.format})`,
                    'success'
                );

                // Close modal after 1.5 seconds
                setTimeout(() => {
                    closeImportModal();
                    textarea.value = '';
                }, 1500);

            } catch (error) {
                showStatusMessage(`‚úó L·ªói: ${error.message}`, 'error');
            }
        }

        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const text = e.target.result;

                try {
                    const result = parseFlashcards(text);

                    // Replace cards array
                    cards.length = 0;
                    cards.push(...result.cards);

                    // Reset state
                    currentIndex = 0;
                    preloadImages();
                    renderCard();

                    // Show success message
                    showStatusMessage(
                        `‚úì ƒê√£ n·∫°p th√†nh c√¥ng ${result.cards.length} th·∫ª t·ª´ file "${file.name}" (ƒë·ªãnh d·∫°ng ${result.format})`,
                        'success'
                    );

                    // Close modal after 2 seconds
                    setTimeout(() => {
                        closeImportModal();
                    }, 2000);

                } catch (error) {
                    showStatusMessage(`‚úó L·ªói ƒë·ªçc file: ${error.message}`, 'error');
                }
            };

            reader.onerror = function() {
                showStatusMessage('‚úó L·ªói ƒë·ªçc file', 'error');
            };

            reader.readAsText(file);
        }

        // Drag and drop support
        const fileUploadArea = document.getElementById('fileUploadArea');

        fileUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileUploadArea.classList.add('drag-over');
        });

        fileUploadArea.addEventListener('dragleave', () => {
            fileUploadArea.classList.remove('drag-over');
        });

        fileUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            fileUploadArea.classList.remove('drag-over');

            const files = e.dataTransfer.files;
            if (files.length > 0) {
                document.getElementById('fileInput').files = files;
                handleFileSelect({ target: { files: files } });
            }
        });

        // ==================== INITIALIZATION ====================

        // Initialize
        preloadImages();
        renderCard();
    </script>
</body>
</html>
