<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minna no Nihongo - B√†i 5 Flashcards</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            text-align: center;
            color: #333;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .progress-container {
            max-width: 800px;
            margin: 0.5rem auto;
            width: 100%;
            padding: 0 1rem;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: #555;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .controls {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 0.5rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 0.9rem;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #5568d3;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .main-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem 1rem;
            position: relative;
        }

        .card-container {
            width: 100%;
            max-width: 800px;
            height: 500px;
            perspective: 1000px;
            position: relative;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            padding: 2rem;
            overflow-y: auto;
        }

        .card-front {
            z-index: 2;
        }

        .card-back {
            transform: rotateY(180deg);
            background: #f8f9fa;
        }

        .topic-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            background: #667eea;
            color: white;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-bottom: 1rem;
            align-self: flex-start;
        }

        .card-image {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .jp-text {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            text-align: center;
            margin-bottom: 1rem;
        }

        .kana-text {
            font-size: 1.3rem;
            color: #666;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .romaji-text {
            font-size: 1.1rem;
            color: #888;
            text-align: center;
            margin-bottom: 1.5rem;
            font-style: italic;
        }

        .vi-text {
            font-size: 1.5rem;
            color: #764ba2;
            text-align: center;
            font-weight: 500;
            margin-bottom: 2rem;
        }

        .example-box {
            background: white;
            padding: 1rem;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            margin-top: auto;
        }

        .example-jp {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .example-vi {
            font-size: 1rem;
            color: #666;
        }

        .image-credit {
            font-size: 0.7rem;
            color: #999;
            margin-top: 0.5rem;
            text-align: center;
        }

        .image-credit a {
            color: #667eea;
            text-decoration: none;
        }

        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: all 0.3s;
            z-index: 10;
        }

        .nav-btn:hover {
            background: white;
            transform: translateY(-50%) scale(1.1);
        }

        .nav-btn.prev {
            left: 1rem;
        }

        .nav-btn.next {
            right: 1rem;
        }

        .keyboard-hints {
            text-align: center;
            color: white;
            font-size: 0.9rem;
            margin-top: 1rem;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .card-container {
                height: 450px;
            }

            .jp-text {
                font-size: 2rem;
            }

            .kana-text {
                font-size: 1.1rem;
            }

            .vi-text {
                font-size: 1.2rem;
            }

            .nav-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
        }

        .loading {
            text-align: center;
            color: white;
            font-size: 1.5rem;
        }

        .topline {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .chip {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            padding: 0.4rem 0.8rem;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            user-select: none;
        }

        .chip:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: scale(1.1);
        }

        .chip:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>„Åø„Çì„Å™„ÅÆÊó•Êú¨Ë™û - B√†i 5 Flashcards</h1>
        <div class="progress-container">
            <div class="progress-info">
                <span id="cardCounter">1 / 48</span>
                <span id="topicLabel">Ph∆∞∆°ng ti·ªán</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
        <div class="controls">
            <button class="btn" onclick="flipCard()">üîÑ L·∫≠t th·∫ª (Space)</button>
            <button class="btn" onclick="shuffleCards()">üîÄ X√°o tr·ªôn (S)</button>
            <button class="btn" onclick="toggleFullscreen()">‚õ∂ To√†n m√†n h√¨nh (F)</button>
        </div>
    </div>

    <div class="main-content">
        <button class="nav-btn prev" onclick="prevCard()">‚Äπ</button>
        <div class="card-container">
            <div class="card" id="card" onclick="flipCard()">
                <div class="card-face card-front" id="cardFront">
                    <div class="loading">ƒêang t·∫£i...</div>
                </div>
                <div class="card-face card-back" id="cardBack">
                    <div class="loading">ƒêang t·∫£i...</div>
                </div>
            </div>
        </div>
        <button class="nav-btn next" onclick="nextCard()">‚Ä∫</button>
    </div>

    <div class="keyboard-hints">
        ‚Üê ‚Üí Chuy·ªÉn th·∫ª | Space/Enter L·∫≠t | L Nghe | Shift+L Nghe c√¢u | S X√°o tr·ªôn | F To√†n m√†n h√¨nh
    </div>

    <script>
        const cards = [
            // PH∆Ø∆†NG TI·ªÜN (8 th·∫ª)
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "È£õË°åÊ©ü",
                kana: "„Å≤„Åì„ÅÜ„Åç",
                romaji: "hik≈çki",
                vi: "m√°y bay",
                exJp: "„Å≤„Åì„ÅÜ„Åç„ÅßÊù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Tokyo b·∫±ng m√°y bay„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Airplane_taking_off.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Airplane_taking_off.jpg"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "Ëàπ",
                kana: "„Åµ„Å≠",
                romaji: "fune",
                vi: "t√†u th·ªßy, thuy·ªÅn",
                exJp: "„Åµ„Å≠„ÅßÂ§ßÈò™„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Osaka b·∫±ng t√†u„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Containership.JPG",
                credit: "https://commons.wikimedia.org/wiki/File:Containership.JPG"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "ÈõªËªä",
                kana: "„Åß„Çì„Åó„ÇÉ",
                romaji: "densha",
                vi: "t√†u ƒëi·ªán",
                exJp: "„Åß„Çì„Åó„ÇÉ„Åß‰ºöÁ§æ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi l√†m b·∫±ng t√†u ƒëi·ªán„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/JR_COMMUTER_TRAIN_KYOTO_STATION_JAPAN_JUNE_2012_(7408283698).jpg",
                credit: "https://commons.wikimedia.org/wiki/File:JR_COMMUTER_TRAIN_KYOTO_STATION_JAPAN_JUNE_2012_(7408283698).jpg"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "Âú∞‰∏ãÈâÑ",
                kana: "„Å°„Åã„Å¶„Å§",
                romaji: "chikatetsu",
                vi: "t√†u ƒëi·ªán ng·∫ßm",
                exJp: "„Å°„Åã„Å¶„Å§„ÅßÊñ∞ÂÆø„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Shinjuku b·∫±ng t√†u ƒëi·ªán ng·∫ßm„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Union_Station_subway_platform.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Union_Station_subway_platform.jpg"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "Êñ∞ÂππÁ∑ö",
                kana: "„Åó„Çì„Åã„Çì„Åõ„Çì",
                romaji: "shinkansen",
                vi: "t√†u si√™u t·ªëc",
                exJp: "„Åó„Çì„Åã„Çì„Åõ„Çì„Åß‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Kyoto b·∫±ng Shinkansen„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/JRC_N700_series_Z28.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:JRC_N700_series_Z28.jpg"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "„Éê„Çπ",
                kana: "„Éê„Çπ",
                romaji: "basu",
                vi: "xe bu√Ωt",
                exJp: "„Éê„Çπ„ÅßÂ≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒë·∫øn tr∆∞·ªùng b·∫±ng xe bu√Ωt„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Tokyo_Bus_Fuso_Aero_Ace.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Tokyo_Bus_Fuso_Aero_Ace.jpg"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "„Çø„ÇØ„Ç∑„Éº",
                kana: "„Çø„ÇØ„Ç∑„Éº",
                romaji: "takushƒ´",
                vi: "taxi",
                exJp: "„Çø„ÇØ„Ç∑„Éº„Åß„ÅÜ„Å°„Å∏Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ nh√† b·∫±ng taxi„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Crowntaxi.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Crowntaxi.jpg"
            },
            {
                topic: "Ph∆∞∆°ng ti·ªán",
                jp: "Ëá™Ëª¢Ëªä",
                kana: "„Åò„Å¶„Çì„Åó„ÇÉ",
                romaji: "jitensha",
                vi: "xe ƒë·∫°p",
                exJp: "„Åò„Å¶„Çì„Åó„ÇÉ„ÅßÈßÖ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi ƒë·∫øn ga b·∫±ng xe ƒë·∫°p„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/City_bike_1.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:City_bike_1.jpg"
            },

            // ƒê·ªäA ƒêI·ªÇM & ƒê·ªòNG T·ª™ (12 th·∫ª)
            {
                topic: "ƒê·ªãa ƒëi·ªÉm",
                jp: "Â≠¶Ê†°",
                kana: "„Åå„Å£„Åì„ÅÜ",
                romaji: "gakk≈ç",
                vi: "tr∆∞·ªùng h·ªçc",
                exJp: "„Éê„Çπ„ÅßÂ≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi ƒë·∫øn tr∆∞·ªùng b·∫±ng xe bu√Ωt„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/School_building.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:School_building.jpg"
            },
            {
                topic: "ƒê·ªãa ƒëi·ªÉm",
                jp: "‰ºöÁ§æ",
                kana: "„Åã„ÅÑ„Åó„ÇÉ",
                romaji: "kaisha",
                vi: "c√¥ng ty",
                exJp: "„Åß„Çì„Åó„ÇÉ„Åß‰ºöÁ§æ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi c√¥ng ty b·∫±ng t√†u ƒëi·ªán„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Office-building.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Office-building.jpg"
            },
            {
                topic: "ƒê·ªãa ƒëi·ªÉm",
                jp: "ÈßÖ",
                kana: "„Åà„Åç",
                romaji: "eki",
                vi: "ga, nh√† ga",
                exJp: "„Åò„Å¶„Çì„Åó„ÇÉ„ÅßÈßÖ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi ƒë·∫øn ga b·∫±ng xe ƒë·∫°p„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Tokyo_Station_Marunouchi_Building.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Tokyo_Station_Marunouchi_Building.jpg"
            },
            {
                topic: "ƒê·ªãa ƒëi·ªÉm",
                jp: "„ÅÜ„Å°",
                kana: "„ÅÜ„Å°",
                romaji: "uchi",
                vi: "nh√†, gia ƒë√¨nh",
                exJp: "„Çø„ÇØ„Ç∑„Éº„Åß„ÅÜ„Å°„Å∏Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ nh√† b·∫±ng taxi„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Japanese_House.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Japanese_House.jpg"
            },
            {
                topic: "ƒê·ªãa ƒëi·ªÉm",
                jp: "„Çπ„Éº„Éë„Éº",
                kana: "„Çπ„Éº„Éë„Éº",
                romaji: "s≈´pƒÅ",
                vi: "si√™u th·ªã",
                exJp: "„ÅÇ„Çã„ÅÑ„Å¶„Çπ„Éº„Éë„Éº„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi b·ªô ƒë·∫øn si√™u th·ªã„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Supermarket.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Supermarket.jpg"
            },
            {
                topic: "Ng∆∞·ªùi",
                jp: "Âèã„Å†„Å°",
                kana: "„Å®„ÇÇ„Å†„Å°",
                romaji: "tomodachi",
                vi: "b·∫°n b√®",
                exJp: "Âèã„Å†„Å°„Å®Â§ßÈò™„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Osaka v·ªõi b·∫°n„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Group_of_friends.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Group_of_friends.jpg"
            },
            {
                topic: "Ng∆∞·ªùi",
                jp: "ÂÆ∂Êóè",
                kana: "„Åã„Åû„Åè",
                romaji: "kazoku",
                vi: "gia ƒë√¨nh",
                exJp: "ÂÆ∂Êóè„Å®‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Kyoto v·ªõi gia ƒë√¨nh„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Family_portrait.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Family_portrait.jpg"
            },
            {
                topic: "Ng∆∞·ªùi",
                jp: "„Å≤„Å®„Çä„Åß",
                kana: "„Å≤„Å®„Çä„Åß",
                romaji: "hitori de",
                vi: "m·ªôt m√¨nh",
                exJp: "„Å≤„Å®„Çä„ÅßÊù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Tokyo m·ªôt m√¨nh„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Alone.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Alone.jpg"
            },
            {
                topic: "ƒê·ªông t·ª´",
                jp: "Ë°å„Åç„Åæ„Åô",
                kana: "„ÅÑ„Åç„Åæ„Åô",
                romaji: "ikimasu",
                vi: "ƒëi",
                exJp: "„Éê„Çπ„ÅßÂ≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi ƒë·∫øn tr∆∞·ªùng b·∫±ng xe bu√Ωt„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Walking_forward.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Walking_forward.jpg"
            },
            {
                topic: "ƒê·ªông t·ª´",
                jp: "Êù•„Åæ„Åô",
                kana: "„Åç„Åæ„Åô",
                romaji: "kimasu",
                vi: "ƒë·∫øn",
                exJp: "Âèã„Å†„Å°„Åå„ÅÜ„Å°„Å∏Êù•„Åæ„Åô„ÄÇ",
                exVi: "B·∫°n t√¥i ƒë·∫øn nh√†„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Coming.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Coming.jpg"
            },
            {
                topic: "ƒê·ªông t·ª´",
                jp: "Â∏∞„Çä„Åæ„Åô",
                kana: "„Åã„Åà„Çä„Åæ„Åô",
                romaji: "kaerimasu",
                vi: "v·ªÅ",
                exJp: "„Çø„ÇØ„Ç∑„Éº„Åß„ÅÜ„Å°„Å∏Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ nh√† b·∫±ng taxi„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Going_home.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Going_home.jpg"
            },

            // TH·ªúI GIAN - TU·∫¶N/TH√ÅNG/NƒÇM (10 th·∫ª)
            {
                topic: "Th·ªùi gian",
                jp: "ÂÖàÈÄ±",
                kana: "„Åõ„Çì„Åó„ÇÖ„ÅÜ",
                romaji: "sensh≈´",
                vi: "tu·∫ßn tr∆∞·ªõc",
                exJp: "ÂÖàÈÄ±‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åó„Åü„ÄÇ",
                exVi: "Tu·∫ßn tr∆∞·ªõc t√¥i ƒë√£ ƒëi Kyoto„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar_week.png",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar_week.png"
            },
            {
                topic: "Th·ªùi gian",
                jp: "‰ªäÈÄ±",
                kana: "„Åì„Çì„Åó„ÇÖ„ÅÜ",
                romaji: "konsh≈´",
                vi: "tu·∫ßn n√†y",
                exJp: "‰ªäÈÄ±Â§ßÈò™„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "Tu·∫ßn n√†y t√¥i s·∫Ω ƒëi Osaka„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar_week.png",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar_week.png"
            },
            {
                topic: "Th·ªùi gian",
                jp: "Êù•ÈÄ±",
                kana: "„Çâ„ÅÑ„Åó„ÇÖ„ÅÜ",
                romaji: "raish≈´",
                vi: "tu·∫ßn sau",
                exJp: "Êù•ÈÄ±Êù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "Tu·∫ßn sau t√¥i s·∫Ω ƒëi Tokyo„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar_week.png",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar_week.png"
            },
            {
                topic: "Th·ªùi gian",
                jp: "ÂÖàÊúà",
                kana: "„Åõ„Çì„Åí„Å§",
                romaji: "sengetsu",
                vi: "th√°ng tr∆∞·ªõc",
                exJp: "ÂÖàÊúàÊó•Êú¨„Å∏Ë°å„Åç„Åæ„Åó„Åü„ÄÇ",
                exVi: "Th√°ng tr∆∞·ªõc t√¥i ƒë√£ ƒëi Nh·∫≠t„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th·ªùi gian",
                jp: "‰ªäÊúà",
                kana: "„Åì„Çì„Åí„Å§",
                romaji: "kongetsu",
                vi: "th√°ng n√†y",
                exJp: "‰ªäÊúà„Éô„Éà„Éä„É†„Å∏Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "Th√°ng n√†y t√¥i v·ªÅ Vi·ªát Nam„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th·ªùi gian",
                jp: "Êù•Êúà",
                kana: "„Çâ„ÅÑ„Åí„Å§",
                romaji: "raigetsu",
                vi: "th√°ng sau",
                exJp: "Êù•ÊúàÈüìÂõΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "Th√°ng sau t√¥i s·∫Ω ƒëi H√†n Qu·ªëc„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th·ªùi gian",
                jp: "ÂéªÂπ¥",
                kana: "„Åç„Çá„Å≠„Çì",
                romaji: "kyonen",
                vi: "nƒÉm ngo√°i",
                exJp: "ÂéªÂπ¥‰∏≠ÂõΩ„Å∏Ë°å„Åç„Åæ„Åó„Åü„ÄÇ",
                exVi: "NƒÉm ngo√°i t√¥i ƒë√£ ƒëi Trung Qu·ªëc„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th·ªùi gian",
                jp: "‰ªäÂπ¥",
                kana: "„Åì„Å®„Åó",
                romaji: "kotoshi",
                vi: "nƒÉm nay",
                exJp: "‰ªäÂπ¥Êó•Êú¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "NƒÉm nay t√¥i s·∫Ω ƒëi Nh·∫≠t„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th·ªùi gian",
                jp: "Êù•Âπ¥",
                kana: "„Çâ„ÅÑ„Å≠„Çì",
                romaji: "rainen",
                vi: "nƒÉm sau",
                exJp: "Êù•Âπ¥„Ç¢„É°„É™„Ç´„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "NƒÉm sau t√¥i s·∫Ω ƒëi M·ªπ„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th·ªùi gian",
                jp: "„ÅÑ„Å§",
                kana: "„ÅÑ„Å§",
                romaji: "itsu",
                vi: "khi n√†o",
                exJp: "„ÅÑ„Å§Êó•Êú¨„Å∏Ë°å„Åç„Åæ„Åô„Åã„ÄÇ",
                exVi: "Khi n√†o b·∫°n ƒëi Nh·∫≠t?",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Question_mark.svg",
                credit: "https://commons.wikimedia.org/wiki/File:Question_mark.svg"
            },

            // NG√ÄY TRONG TH√ÅNG (20 th·∫ª - c√°c ng√†y ƒë·∫∑c bi·ªát + m·∫´u)
            {
                topic: "Ng√†y th√°ng",
                jp: "„Å§„ÅÑ„Åü„Å°",
                kana: "„Å§„ÅÑ„Åü„Å°",
                romaji: "tsuitachi",
                vi: "ng√†y 1",
                exJp: "ÔºëÊúà„Å§„ÅÑ„Åü„Å°„Å´Êù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Tokyo v√†o ng√†y 1 th√°ng 1„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Åµ„Å§„Åã",
                kana: "„Åµ„Å§„Åã",
                romaji: "futsuka",
                vi: "ng√†y 2",
                exJp: "ÔºíÊúà„Åµ„Å§„Åã„Å´Â§ßÈò™„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Osaka v√†o ng√†y 2 th√°ng 2„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Åø„Å£„Åã",
                kana: "„Åø„Å£„Åã",
                romaji: "mikka",
                vi: "ng√†y 3",
                exJp: "ÔºìÊúà„Åø„Å£„Åã„Å´‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Kyoto v√†o ng√†y 3 th√°ng 3„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Çà„Å£„Åã",
                kana: "„Çà„Å£„Åã",
                romaji: "yokka",
                vi: "ng√†y 4",
                exJp: "ÔºîÊúà„Çà„Å£„Åã„Å´‰ºöÁ§æ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi c√¥ng ty v√†o ng√†y 4 th√°ng 4„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„ÅÑ„Å§„Åã",
                kana: "„ÅÑ„Å§„Åã",
                romaji: "itsuka",
                vi: "ng√†y 5",
                exJp: "ÔºïÊúà„ÅÑ„Å§„Åã„Å´Â≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒë·∫øn tr∆∞·ªùng v√†o ng√†y 5 th√°ng 5„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„ÇÄ„ÅÑ„Åã",
                kana: "„ÇÄ„ÅÑ„Åã",
                romaji: "muika",
                vi: "ng√†y 6",
                exJp: "ÔºñÊúà„ÇÄ„ÅÑ„Åã„Å´Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ nh√† v√†o ng√†y 6 th√°ng 6„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Å™„ÅÆ„Åã",
                kana: "„Å™„ÅÆ„Åã",
                romaji: "nanoka",
                vi: "ng√†y 7",
                exJp: "ÔºóÊúà„Å™„ÅÆ„Åã„Å´Êù•„Åæ„Åô„ÄÇ",
                exVi: "T√¥i s·∫Ω ƒë·∫øn v√†o ng√†y 7 th√°ng 7„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Çà„ÅÜ„Åã",
                kana: "„Çà„ÅÜ„Åã",
                romaji: "y≈çka",
                vi: "ng√†y 8",
                exJp: "ÔºòÊúà„Çà„ÅÜ„Åã„Å´Êù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Tokyo v√†o ng√†y 8 th√°ng 8„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Åì„Åì„ÅÆ„Åã",
                kana: "„Åì„Åì„ÅÆ„Åã",
                romaji: "kokonoka",
                vi: "ng√†y 9",
                exJp: "ÔºôÊúà„Åì„Åì„ÅÆ„Åã„Å´Â§ßÈò™„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Osaka v√†o ng√†y 9 th√°ng 9„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Å®„Åä„Åã",
                kana: "„Å®„Åä„Åã",
                romaji: "t≈çka",
                vi: "ng√†y 10",
                exJp: "ÔºëÔºêÊúà„Å®„Åä„Åã„Å´Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ v√†o ng√†y 10 th√°ng 10„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Åò„ÇÖ„ÅÜ„Çà„Å£„Åã",
                kana: "„Åò„ÇÖ„ÅÜ„Çà„Å£„Åã",
                romaji: "j≈´yokka",
                vi: "ng√†y 14",
                exJp: "ÔºíÊúà„Åò„ÇÖ„ÅÜ„Çà„Å£„Åã„Å´‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Kyoto v√†o ng√†y 14 th√°ng 2„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„ÅØ„Å§„Åã",
                kana: "„ÅØ„Å§„Åã",
                romaji: "hatsuka",
                vi: "ng√†y 20",
                exJp: "ÔºìÊúà„ÅØ„Å§„Åã„Å´Êù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Tokyo v√†o ng√†y 20 th√°ng 3„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Å´„Åò„ÇÖ„ÅÜ„Çà„Å£„Åã",
                kana: "„Å´„Åò„ÇÖ„ÅÜ„Çà„Å£„Åã",
                romaji: "nij≈´yokka",
                vi: "ng√†y 24",
                exJp: "ÔºëÔºíÊúà„Å´„Åò„ÇÖ„ÅÜ„Çà„Å£„Åã„Å´Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ v√†o ng√†y 24 th√°ng 12„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Ng√†y th√°ng",
                jp: "„Äú„Å´„Å°",
                kana: "„Äú„Å´„Å°",
                romaji: "~nichi",
                vi: "ng√†y ~ (11,12,13,15-19,21-23,25-31)",
                exJp: "ÔºëÔºï„Å´„Å°Ôºà„Åò„ÇÖ„ÅÜ„Åî„Å´„Å°Ôºâ„Å´‰ºöÁ§æ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi c√¥ng ty v√†o ng√†y 15„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },

            // TH√ÅNG (12 th·∫ª)
            {
                topic: "Th√°ng",
                jp: "ÔºëÊúà",
                kana: "„ÅÑ„Å°„Åå„Å§",
                romaji: "ichigatsu",
                vi: "th√°ng 1",
                exJp: "ÔºëÊúà„Å´Êó•Êú¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Nh·∫≠t v√†o th√°ng 1„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºíÊúà",
                kana: "„Å´„Åå„Å§",
                romaji: "nigatsu",
                vi: "th√°ng 2",
                exJp: "ÔºíÊúà„Å´‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Kyoto v√†o th√°ng 2„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºìÊúà",
                kana: "„Åï„Çì„Åå„Å§",
                romaji: "sangatsu",
                vi: "th√°ng 3",
                exJp: "ÔºìÊúà„Å´Â§ßÈò™„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Osaka v√†o th√°ng 3„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºîÊúà",
                kana: "„Åó„Åå„Å§",
                romaji: "shigatsu",
                vi: "th√°ng 4",
                exJp: "ÔºîÊúà„Å´Â≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒë·∫øn tr∆∞·ªùng v√†o th√°ng 4„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºïÊúà",
                kana: "„Åî„Åå„Å§",
                romaji: "gogatsu",
                vi: "th√°ng 5",
                exJp: "ÔºïÊúà„Å´Êù±‰∫¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Tokyo v√†o th√°ng 5„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºñÊúà",
                kana: "„Çç„Åè„Åå„Å§",
                romaji: "rokugatsu",
                vi: "th√°ng 6",
                exJp: "ÔºñÊúà„Å´Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ v√†o th√°ng 6„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºóÊúà",
                kana: "„Åó„Å°„Åå„Å§",
                romaji: "shichigatsu",
                vi: "th√°ng 7",
                exJp: "ÔºóÊúà„Å´‰ºöÁ§æ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi c√¥ng ty v√†o th√°ng 7„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºòÊúà",
                kana: "„ÅØ„Å°„Åå„Å§",
                romaji: "hachigatsu",
                vi: "th√°ng 8",
                exJp: "ÔºòÊúà„Å´„Éô„Éà„Éä„É†„Å∏Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ Vi·ªát Nam v√†o th√°ng 8„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºôÊúà",
                kana: "„Åè„Åå„Å§",
                romaji: "kugatsu",
                vi: "th√°ng 9",
                exJp: "ÔºôÊúà„Å´Â≠¶Ê†°„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒë·∫øn tr∆∞·ªùng v√†o th√°ng 9„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºëÔºêÊúà",
                kana: "„Åò„ÇÖ„ÅÜ„Åå„Å§",
                romaji: "j≈´gatsu",
                vi: "th√°ng 10",
                exJp: "ÔºëÔºêÊúà„Å´Êó•Êú¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Nh·∫≠t v√†o th√°ng 10„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºëÔºëÊúà",
                kana: "„Åò„ÇÖ„ÅÜ„ÅÑ„Å°„Åå„Å§",
                romaji: "j≈´ichigatsu",
                vi: "th√°ng 11",
                exJp: "ÔºëÔºëÊúà„Å´‰∫¨ÈÉΩ„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ",
                exVi: "T√¥i ƒëi Kyoto v√†o th√°ng 11„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
            {
                topic: "Th√°ng",
                jp: "ÔºëÔºíÊúà",
                kana: "„Åò„ÇÖ„ÅÜ„Å´„Åå„Å§",
                romaji: "j≈´nigatsu",
                vi: "th√°ng 12",
                exJp: "ÔºëÔºíÊúà„Å´Â∏∞„Çä„Åæ„Åô„ÄÇ",
                exVi: "T√¥i v·ªÅ v√†o th√°ng 12„ÄÇ",
                img: "https://commons.wikimedia.org/wiki/Special:FilePath/Calendar.jpg",
                credit: "https://commons.wikimedia.org/wiki/File:Calendar.jpg"
            },
        ];

        let currentIndex = 0;
        let isFlipped = false;
        const cardElement = document.getElementById('card');
        const cardFront = document.getElementById('cardFront');
        const cardBack = document.getElementById('cardBack');
        const progressFill = document.getElementById('progressFill');
        const cardCounter = document.getElementById('cardCounter');
        const topicLabel = document.getElementById('topicLabel');

        // Web Speech API - Japanese voices
        let jaVoices = [];
        function loadVoices(){
            jaVoices = window.speechSynthesis.getVoices()
                .filter(v => v.lang && v.lang.toLowerCase().startsWith('ja'));
        }
        if ('speechSynthesis' in window) {
            loadVoices();
            window.speechSynthesis.onvoiceschanged = loadVoices;
        }

        function speakJa(text, {rate=1, pitch=1, volume=1} = {}){
            if (!('speechSynthesis' in window)) return false;
            if (!text || !text.trim()) return false;
            // H·ªßy ph√°t hi·ªán t·∫°i ƒë·ªÉ tr√°nh ch·ªìng √¢m
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(text);
            // Ch·ªçn gi·ªçng ja-JP
            const exact = jaVoices.find(v => v.lang.toLowerCase() === 'ja-jp');
            const anyJa = jaVoices[0];
            u.voice = exact || anyJa || null;
            u.lang  = (exact || anyJa)?.lang || 'ja-JP';
            u.rate  = rate;
            u.pitch = pitch;
            u.volume= volume;
            window.speechSynthesis.speak(u);
            return true;
        }

        function stopSpeak(){ 
            try{ window.speechSynthesis.cancel(); }catch(_){} 
        }

        // H√†m ph√°t √¢m cho m·∫∑t tr∆∞·ªõc
        function speakFront(){
            const card = cards[currentIndex];
            const text = card.kana || card.jp;
            speakJa(text);
        }

        // H√†m ph√°t √¢m t·ª´ ·ªü m·∫∑t sau
        function speakBackWord(){
            const card = cards[currentIndex];
            const text = card.kana || card.jp;
            speakJa(text);
        }

        // H√†m ph√°t √¢m c√¢u v√≠ d·ª• ·ªü m·∫∑t sau
        function speakBackExample(){
            const card = cards[currentIndex];
            const text = card.exJp;
            speakJa(text);
        }

        // Preload images
        function preloadImages() {
            cards.forEach(card => {
                if (card.img) {
                    const img = new Image();
                    img.src = card.img;
                }
            });
        }

        function renderCard() {
            const card = cards[currentIndex];
            
            // Front side
            cardFront.innerHTML = `
                <div class="topline">
                    <span class="topic-badge">${card.topic}</span>
                    <button class="chip" id="speakFrontBtn" title="Nghe ph√°t √¢m (L)" aria-label="Ph√°t √¢m t·ª´" onclick="event.stopPropagation(); speakFront();">üîä</button>
                </div>
                ${card.img ? `
                    <img src="${card.img}" alt="${card.vi}" class="card-image">
                    <div class="image-credit">·∫¢nh: <a href="${card.credit}" target="_blank" rel="noopener">Wikimedia Commons</a></div>
                ` : ''}
                <div class="jp-text">${card.jp}</div>
                <div class="kana-text">${card.kana}</div>
                <div class="romaji-text">${card.romaji}</div>
            `;

            // Back side
            cardBack.innerHTML = `
                <div class="topline">
                    <span class="topic-badge">${card.topic}</span>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="chip" id="speakBackWordBtn" title="Nghe t·ª´ (L)" aria-label="Ph√°t √¢m t·ª´" onclick="event.stopPropagation(); speakBackWord();">üîä</button>
                        <button class="chip" id="speakBackExBtn" title="Nghe c√¢u v√≠ d·ª• (Shift+L)" aria-label="Ph√°t √¢m c√¢u v√≠ d·ª•" onclick="event.stopPropagation(); speakBackExample();">üîäüìù</button>
                    </div>
                </div>
                ${card.img ? `
                    <img src="${card.img}" alt="${card.vi}" class="card-image">
                ` : ''}
                <div class="vi-text">${card.vi}</div>
                <div class="example-box">
                    <div class="example-jp">${card.exJp}</div>
                    <div class="example-vi">${card.exVi}</div>
                </div>
            `;

            // Update progress
            progressFill.style.width = `${((currentIndex + 1) / cards.length) * 100}%`;
            cardCounter.textContent = `${currentIndex + 1} / ${cards.length}`;
            topicLabel.textContent = card.topic;

            // Reset flip state
            isFlipped = false;
            cardElement.classList.remove('flipped');
        }

        function flipCard() {
            isFlipped = !isFlipped;
            if (isFlipped) {
                cardElement.classList.add('flipped');
            } else {
                cardElement.classList.remove('flipped');
            }
        }

        function nextCard() {
            currentIndex = (currentIndex + 1) % cards.length;
            renderCard();
        }

        function prevCard() {
            currentIndex = (currentIndex - 1 + cards.length) % cards.length;
            renderCard();
        }

        function shuffleCards() {
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [cards[i], cards[j]] = [cards[j], cards[i]];
            }
            currentIndex = 0;
            renderCard();
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log('Fullscreen error:', err);
                });
            } else {
                document.exitFullscreen();
            }
        }

        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowLeft':
                    prevCard();
                    break;
                case 'ArrowRight':
                    nextCard();
                    break;
                case ' ':
                case 'Enter':
                    e.preventDefault();
                    flipCard();
                    break;
                case 's':
                case 'S':
                    shuffleCards();
                    break;
                case 'f':
                case 'F':
                    toggleFullscreen();
                    break;
                case 'l':
                case 'L':
                    e.preventDefault();
                    if (e.shiftKey) {
                        // Shift+L: ph√°t √¢m c√¢u v√≠ d·ª• (ch·ªâ khi ƒëang ·ªü m·∫∑t sau)
                        if (isFlipped) {
                            speakBackExample();
                        }
                    } else {
                        // L: ph√°t √¢m t·ª´ (m·∫∑t tr∆∞·ªõc ho·∫∑c m·∫∑t sau)
                        if (isFlipped) {
                            speakBackWord();
                        } else {
                            speakFront();
                        }
                    }
                    break;
            }
        });

        // Initialize
        preloadImages();
        renderCard();
    </script>
</body>
</html>
